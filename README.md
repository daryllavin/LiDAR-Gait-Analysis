# LiDAR-Gait-Analysis

The analysis folder contains 5 python programs: png2realdepth, distancefrompoints, makevideo, 3dframe, and 3dvid. It also includes an example LiDAR data folder (Walking_LiDAR_data) which can be used as an input folder for the python programs.

Usage pipeline: The user should record videos using the Stray Scanner app, which sends the LiDAR data from the video into a folder located in the deviceâ€™s Files app. This LiDAR data folder should then be added to the same folder that contains the python programs being run, just like the example folder (Walking_LiDAR_data) is. After this is done, the programs are able to be run as long as the necessary dependencies are installed (numpy, opencv, open3d, matplotlib).

Note: The image/video size is 192x256.

png2realdepth: This program prompts the user to input their LiDAR data folder name and an output file name (which should be in an image format like .png). It then prints the number of total frames in the input video, and asks the user to pick a valid frame number (frames start from 000000 and should all be 6 digits). It then prompts the user to choose an x and y pixel coordinate at which the real distance from that point to the camera is printed, and a depth map of all points is also saved to the output file. It also opens a visualizer window showing the depth map, and depth values in the visualizer can be viewed by hovering the cursor over pixels. 

distancefrompoints: This program prompts the user to input their LiDAR data folder name and an output file name (which should be in an image format like .png). It then prints the number of total frames in the input video, and asks the user to pick a valid frame number (frames start from 000000 and should all be 6 digits). It then prompts the user to choose two sets of x and y pixel coordinates. The first coordinate location inputted by the user will be the reference coordinates from which the distance map data will be based on (it will be a map of the distances from this point to all other points). The second coordinate location will be the point from which a distance will be printed, allowing the user to print distances between these two exact pixel locations. The distance map is then saved to the output file. It also opens a visualizer window showing the distance map, and each distance can be viewed by hovering the cursor over each pixel. 

makevideo: This program prompts the user to input their LiDAR data folder name, then asks if they want a depth map or a confidence map. It then asks for two output file names, one for the standalone depth/confidence video, and one for the comparative video (these should both be in .mp4 file formats). It then outputs one standalone video in the first output file which shows the depth/confidence version of the original video, and also a comparative side-by-side video in the second output file of the depth/confidence video next to the original rgb video.

3dframe: This program prompts the user to input their LiDAR data folder name and an output file name (which should be in .ply file format). It then prints the number of total frames in the input video, and asks the user to pick a valid frame number (frames start from 000000 and should all be 6 digits). It then creates a 3d point cloud representation of the LiDAR data, shows the point cloud in an open3d window, and saves the result to the output file.
3dvid: This program prompts the user to input their LiDAR data folder name, then opens an open3d visualizer window in which the 3d point cloud video plays.
